---
import MainLayout from '../layouts/main.astro';
import { Hero13 } from '@/components/hero13';
import { Feature69 } from '@/components/feature69';
import { Logos10 } from '@/components/logos10';
import { Feature272 } from '@/components/feature272';
import { Feature2 } from '@/components/feature2';
import { Feature120 } from '@/components/feature120';
import { Feature166 } from '@/components/feature166';
import { Faq9 } from '@/components/faq9';

import {
  feature69Content,
  feature2Content,
  feature120Content,
  feature166Content
} from '@/content/home';
import { resolveImage, resolveImages } from '@/lib/resolve-images';

const resolvedFeature69Images = await resolveImages(feature69Content.map(feature => feature.image));
const feature69Images = feature69Content.map((feature, index) => ({
  ...feature,
  image: resolvedFeature69Images[index]
}));

const feature2Image = await resolveImage(feature2Content.image);

const {
  image: feature120HeroSource,
  avatar: feature120AvatarSource,
  ...feature120Base
} = feature120Content;

const feature120HeroImage = await resolveImage(feature120HeroSource);
const feature120AvatarImage = await resolveImage(feature120AvatarSource.image);
const feature166Images = await resolveImages([
  feature166Content.feature1.image,
  feature166Content.feature2.image,
  feature166Content.feature3.image,
  feature166Content.feature4.image
]);

const feature166Props = {
  ...feature166Content,
  feature1: { ...feature166Content.feature1, image: feature166Images[0] },
  feature2: { ...feature166Content.feature2, image: feature166Images[1] },
  feature3: { ...feature166Content.feature3, image: feature166Images[2] },
  feature4: { ...feature166Content.feature4, image: feature166Images[3] }
};

const feature120Props = {
  ...feature120Base,
  heroImage: feature120HeroImage,
  avatar: { ...feature120AvatarSource, image: feature120AvatarImage }
};

const seo = {
	title: 'MacTribe | Mac Support London',
	description:
		'We provide fully managed IT services and Mac Support for London businesses',
	siteName: 'MacTribe',
	image: 'https://deifkwefumgah.cloudfront.net/shadcnblocks/block/placeholder-1.svg'
};

---

<MainLayout seo={seo}>
	<Hero13 />
	<Feature69 client:load features={feature69Images} />
	<Feature272 client:load/>
	<Logos10 client:load/>
	<Feature2
		title={feature2Content.title}
		description={feature2Content.description}
		buttonPrimary={feature2Content.buttonPrimary}
		buttonSecondary={feature2Content.buttonSecondary}
		imageAlt={feature2Content.imageAlt}
		imageSrc={feature2Image}
	/>
	<Feature166 {...feature166Props} />
	<Feature120 {...feature120Props} />
	<Faq9 client:load />

</MainLayout>
